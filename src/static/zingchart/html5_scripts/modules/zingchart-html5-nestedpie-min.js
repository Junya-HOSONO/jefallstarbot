/*
All of the code within the ZingChart software is developed and copyrighted by PINT, Inc., and may not be copied,
replicated, or used in any other software or application without prior permission from PINT. All usage must coincide with the
ZingChart End User License Agreement which can be requested by email at support@zingchart.com.

Build 0.120731
*/
ZC.QU.push("nestedpie");ZC.WA=ZC.HZ.B6({$i:function(b){this.b(b);this.AC="nestedpie";this.B0=new ZC.V9(this)},PI:function(){return""},II:function(b){switch(b){case "m":return new ZC.PY(this)}},A1Y:function(){var b=this.II("m","scale");b.BH="scale";b.P=this.P+"-scale";this.B9.push(b);this.b()}});
ZC.V9=ZC.J7.B6({$i:function(b){this.b(b);this.L1=[];this.JS=[]},A26:function(){return new ZC.MT(this)},parse:function(){this.L1=[];this.JS=[];this.b();for(var b=0,a=this.AA.length;b<a;b++)if(this.D.I["plot"+b+".visible"]||this.D.getToggleAction()=="hide")for(var c=0,d=this.AA[b].Q.length;c<d;c++)if(this.AA[b].Q[c]!=null){var e=this.AA[b].Q[c];if(this.JS[c]==null)this.JS[c]=this.AA[b].C7;var f=this.JS[c],h=f+360*e.A9/this.L1[c];this.JS[c]=h;e.AL=f;e.AW=h}}});
ZC.MT=ZC.FD.B6({$i:function(b){this.b(b);this.AC="nestedpie";this.B9=["scale"];this.C7=this.LX=this.O6=0;this.B1=null},OD:function(){return new ZC.UC(this)},parse:function(){var b,a;if(this.o[ZC._[19]]==null)this.o[ZC._[19]]={};this.AZ=this.JB();this.BM=this.AZ[0];this.Y=this.AZ[1];this.A8=this.AZ[2];this.BQ=this.AZ[0];this.AT=this.AZ[0];this.loadXPalette();this.b();this.B1=new ZC.E5(this);this.D.A.AR.load(this.B1.o,["graph.plot.value-box.connector",this.AC+".plot.value-box.connector"]);if((b=this.D.o.plot)!=
null)if(b[ZC._[19]]!=null&&(a=b[ZC._[19]].connector)!=null)this.B1.append(a);this.B1.append(this.o[ZC._[19]].connector);this.Q4_a([["slice-start","O6","fp"],["offset","O6","fp"],["band-space","LX","fp"],["ref-angle","C7","i"]]);b=0;for(a=this.Q.length;b<a;b++)if(this.Q[b]!=null&&(this.D.I["plot"+this.J+".visible"]||this.D.getToggleAction()=="hide")){if(this.A.L1[b]==null)this.A.L1[b]=0;this.A.L1[b]+=ZC._f_(this.Q[b].A9)}},paint:function(){this.b();this.H2=this.BE("bl",0);this.JP(true)}});
ZC.UC=ZC.GN.B6({setup:function(){var b=this.D.B2(this.A.BB("k")[0]);this.iX=b.iX+b.G/2+b.C9;this.iY=b.iY+b.E/2+b.CF;if(!this.FO){this.copy(this.A);this.o[ZC._[10]]=null;this.DK=this.A.DK;this.C4()&&this.parse(false);this.FO=1}},A2P:function(){var b=ZC.AV.BN(this.iX,this.iY,this.BV+this.I.bandwidth/2+this.DT,(this.AL+this.AW)/2%360);return[b[0],b[1]]},KJ:function(b,a){var c=this.A.M6();ZC._cp_(a,c);var d=this.A9*100/this.A.A.L1[this.J],e=new String(d);if(c[ZC._[14]]!=null)e=d.toFixed(ZC.BR(0,ZC._i_(c[ZC._[14]])));
this.DN=[["%node-percent-value",e],["%npv",e]];return b=this.b(b,a)},PA:function(b){var a={},c="in";if(b.o[ZC._[9]]!=null)c=b.o[ZC._[9]];a.color=c=="out"?this.Y:this.BM;return a},A1N:function(b){var a="in";if(b.o[ZC._[9]]!=null)a=b.o[ZC._[9]];var c=(this.AL+this.AW)/2%360;if(a=="out")if(this.J==this.A.Q.length-1){ZC._a_(0.1*this.AU*ZC.CP(c));var d=ZC.AV.BN(this.iX,this.iY,this.A.O6+(this.A.Q.length+1)*(this.I.bandwidth+this.I.bandspace)-this.I.bandspace-this.I.bandwidth/2+b.DT,c);a=c>=0&&c<90||c>=
270&&c<360?d[0]+20+this.C9:d[0]-b.G-20+this.C9;b=d[1]-b.CG/2+this.CF}else b=a=-1;else{d=ZC.AV.BN(this.iX,this.iY,this.BV+this.I.bandwidth/2+b.DT,c);a=d[0]-b.D8/2+this.C9;b=d[1]-b.CG/2+this.CF}return[a,b,c]},G9:function(){var b=this,a=b.b();if(a.AM&&a.AX!=null&&a.AX!=""){var c="in";if(a.o[ZC._[9]]!=null)c=a.o[ZC._[9]];if(c=="out"&&b.J==b.A.Q.length-1){c=new ZC.CY(b.A);c.X=c.BT=b.H.usc()?b.H.mc("top"):b.D.AQ["3d"]||b.H.L7?ZC.AN(b.D.P+"-plots-vb-c"):ZC.AN(b.D.P+"-plot-"+b.A.J+"-vb-c");c.append(b.A.B1.o);
b.PA(a);c.AT=b.Y;c.E9="line";c.C=[];var d=(b.AL+b.AW)/2%360;ZC._a_(0.1*b.AU*ZC.CP(d));var e=ZC.AV.BN(b.iX,b.iY,b.BV+b.I.bandwidth+a.DT,d);a=ZC.AV.BN(b.iX,b.iY,b.A.O6+(b.A.Q.length+1)*(b.I.bandwidth+b.I.bandspace)-b.I.bandspace-b.I.bandwidth/2+a.DT,d);e[0]+=b.C9;a[0]+=b.C9;e[1]+=b.CF;a[1]+=b.CF;c.C.push(e,a);d>=0&&d<90||d>=270&&d<360?c.C.push([a[0]+20,a[1]]):c.C.push([a[0]-20,a[1]]);c.parse();c.GW=function(f){return b.GW(f)};c.C4()&&c.parse();c.AM&&c.paint()}}},paint:function(){function b(){var i=
f.DF(),j=a.D.P+ZC._[36]+a.D.P+ZC._[37]+a.A.J+ZC._[6];i=ZC.L.DJ("poly")+'class="'+j+'" id="'+a.P+ZC._[32]+i+'"/>';a.A.A.FZ.push(i);a.A.U!=null&&a.G9()}var a=this;a.b();var c=a.D.B2(a.A.BB("k")[0]);a.setup();a.AU=ZC.CT(c.G,c.E)/2;a.AU=c.IP*a.AU;a.BV=a.A.O6;if(a.BV<1)a.BV=a.A.O6*a.AU;var d=a.A.LX;if(d<1)d=a.A.LX*a.AU;var e=(a.AU-a.BV-(a.A.Q.length-1)*d)/a.A.Q.length;e=ZC.BR(e,2);a.BV+=a.J*(e+d);a.AU=a.BV+e;c=a.A.FG(a,a);var f=new ZC.CY(a.A);f.P=a.P;f.X=a.A.BE("bl",1);f.BT=a.A.BE("bl",0);f.copy(c);f.iX=
a.iX;f.iY=a.iY;f.E9="pie";f.AL=a.AL;f.AW=a.AW;f.BV=a.BV;f.AU=a.AU;f.parse();var h=f.BV;a.I.bandwidth=e;a.I.bandspace=d;if(a.A.F9&&!a.D.FW){d=f;e={};d.AL=a.AL;d.AW=a.AW;e.angleStart=a.AL;e.angleEnd=a.AW;switch(a.A.H9){case 1:d.AB=0;e.alpha=c.AB;break;case 2:d.AB=0;d.AW=a.AL;e.alpha=c.AB;e.angleEnd=a.AW;break;case 3:d.AB=0;d.AW=a.AL;d.BV=h+a.I.bandwidth;e.alpha=c.AB;e.angleEnd=a.AW;e.slice=h;break;case 4:d.AB=0;h=ZC.AV.BN(a.iX,a.iY,a.AU,(a.AL+a.AW)/2);d.iX=h[0];d.iY=h[1];e.alpha=c.AB;e.x=a.iX;e.y=a.iY;
break;case 5:d.AB=0;d.AL=d.AW=(a.AL+a.AW)/2;e.alpha=c.AB;e.angleStart=a.AL;e.angleEnd=a.AW}for(var g in a.A.DI){d[ZC.CA.FH[ZC.CH(g)]]=a.A.DI[g];e[ZC.CH(g)]=c[ZC.CA.FH[ZC.CH(g)]]}if(a.D.CZ==null)a.D.CZ={};if(a.D.CZ[a.A.J+"-"+a.J]!=null)for(g in a.D.CZ[a.A.J+"-"+a.J])d[ZC.CA.FH[ZC.CH(g)]]=a.D.CZ[a.A.J+"-"+a.J][g];a.D.CZ[a.A.J+"-"+a.J]={};ZC._cp_(e,a.D.CZ[a.A.J+"-"+a.J]);g=new ZC.CA(d,e,a.A.FM,a.A.H6,ZC.CA.LO[a.A.H7],function(){b()});g.B4=a;a.HJ(g)}else{f.paint();b()}},A2F:function(b){var a=this;ZC.move||
a.HT({layer:b,type:"shape",initcb:function(){this.copy(a);this.iX=a.iX;this.iY=a.iY;this.E9="pie";this.Y=a.A.AZ[3];this.A8=a.A.AZ[2];this.AL=a.AL;this.AW=a.AW;this.BV=a.BV;this.AU=a.AU},parsecb:function(){this.o[ZC._[10]]=null}})}});
