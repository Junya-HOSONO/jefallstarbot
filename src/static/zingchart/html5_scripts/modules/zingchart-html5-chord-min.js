/*
All of the code within the ZingChart software is developed and copyrighted by PINT, Inc., and may not be copied,
replicated, or used in any other software or application without prior permission from PINT. All usage must coincide with the
ZingChart End User License Agreement which can be requested by email at support@zingchart.com.

Build 0.120731
*/
zingchart.setModule("chord");
(function(){ZC.A3L=function(){this.A38="palette";this.BM="#6a921f";this.AZ=[];this.ZU=0.8;this.A3D=0.1;this.A3C=0;this.A3F=5;this.TL=0;this.A3M=function(){for(var i=(Math.random()*16777215+1<<0).toString(16);i.length<6;)i="0"+i;return"#"+i}};var h,s=[],C=null,D=null,F=-1,E=-1,J=zingchart.legend_item_click;zingchart.legend_item_click=function(i){J!=null&&J(i);var e=zingchart.getLoader(i.id);if(e){e=zingchart.getGraph(e,i.graphid);if(!(!e||e.o.type!="chord"))if(h){var c;(c=ZC.AH(s,i.plotindex))!=-1?
s.splice(c,1):s.push(i.plotindex);e=zingchart.getLoader(i.id);e.HA()}}};var K=zingchart.shape_mouseover;zingchart.shape_mouseover=function(i){K!=null&&K(i);var e=zingchart.getLoader(i.id);if(e){e=zingchart.getGraph(e,i.graphid);if(!(!e||e.o.type!="chord"))if(!h.TL)if(i.shapeid.substring(0,8)=="segment_"){e=i.shapeid.replace("segment_","");for(var c=[],x=0;x<F;x++)for(var p=0;p<E;p++)c.push({id:"chord_"+x+"_"+p,alpha:e==x||e==p?1:0.1});zingchart.exec(i.id,"updateobject",{type:"shape",dynamic:true,
data:c})}}};var L=zingchart.shape_mouseout;zingchart.shape_mouseout=function(i){L!=null&&L(i);var e=zingchart.getLoader(i.id);if(e){e=zingchart.getGraph(e,i.graphid);if(!(!e||e.o.type!="chord"))if(!h.TL)if(i.shapeid.substring(0,8)=="segment_"){e=[];for(var c=0;c<F;c++)for(var x=0;x<E;x++)e.push({id:"chord_"+c+"_"+x,alpha:0.75});zingchart.exec(i.id,"updateobject",{type:"shape",dynamic:true,data:e})}}};var M=zingchart.dataparse;zingchart.dataparse=function(i,e){if(M!=null)e=M(i,e);var c,x=zingchart.getLoader(i.id);
zingchart.initThemes(x);for(var p=0,P=e[ZC._[18]].length;p<P;p++)if(e[ZC._[18]][p].type=="chord"){c=e[ZC._[18]][p].type;var j=e[ZC._[18]][p],m={};if(j.options)m=j.options[c]||j.options;ZC._todash_(m);if(C!=null){j.shapes=[];ZC._cpa_(C,j.shapes)}if(D!=null){j[ZC._[12]]=[];ZC._cpa_(D,j[ZC._[12]])}h=new ZC.A3L;if((c=m["color-type"])!=null)h.A38=c;if((c=m.color)!=null)h.BM=ZC.BP.LQ(c);if((c=m.palette)!=null)h.AZ=c;if((c=m.radius)!=null)h.ZU=ZC._f_(ZC.ND(c));if((c=m["band-width"])!=null)h.A3D=ZC._f_(ZC.ND(c));
if((c=m["band-space"])!=null)h.A3C=ZC._f_(ZC.ND(c));if((c=m["angle-padding"])!=null)h.A3F=ZC._i_(c);if((c=m["static"])!=null)h.TL=ZC._b_(c);var f=zingchart.getGraphInfo(x,e,p),t=f.plotarea.x+f.plotarea.width/2,u=f.plotarea.y+f.plotarea.height/2,q;q=h.ZU>1?ZC._i_(h.ZU):ZC._i_(h.ZU*ZC.CT(f.plotarea.width/2,f.plotarea.height/2));var y;y=h.A3D>1?q-ZC._i_(h.A3D):ZC._i_((1-h.A3D)*q);if(h.A3C<1)h.A3C=ZC._i_(h.A3C*q);f=j[ZC._[13]];if(F==-1)F=f.length;if(E==-1)for(var a=0,v=f.length;a<v;a++){var l=f[a][ZC._[5]]||
[];E=ZC.BR(E,l.length)}j.shapes||(j.shapes=[]);if(!C){C=[];ZC._cpa_(j.shapes,C)}var G=j.shapes;j[ZC._[12]]||(j[ZC._[12]]=[]);if(!D){D=[];ZC._cpa_(j[ZC._[12]],D)}var n=j[ZC._[12]];if(j.legend)j.legend[ZC._[56]]="none";var o=0;a=0;for(v=f.length;a<v;a++)if(ZC.AH(s,a)==-1){l=f[a][ZC._[5]]||[];for(var b=0,r=l.length;b<r;b++)if(ZC.AH(s,b)==-1)o+=ZC._f_(l[b])}var d=0;a=0;for(v=f.length;a<v;a++)ZC.AH(s,a)==-1&&d++;var w=360-h.A3F*d;d=[];var H=[],z=0;a=0;for(v=f.length;a<v;a++){ZC._todash_(f[a]);b=h.BM;if(h.A38==
"palette")b=h.AZ.length>0?h.AZ[a%h.AZ.length]:zingchart.getPalette(x,a,"bar")[1];else if(h.A38=="random")b=h.A3M();if(ZC.AH(s,a)==-1){if(f[a][ZC._[0]]==null)f[a][ZC._[0]]=b;f[a].visible=1;var k={},g=0;l=f[a][ZC._[5]]||[];b=0;for(r=l.length;b<r;b++)if(ZC.AH(s,b)==-1)g+=ZC._f_(l[b]);k[ZC._[1]]=z;k[ZC._[2]]=k[ZC._[1]]+w*g/o;k.total=g;k[ZC._[5]]=f[a][ZC._[5]];z=k[ZC._[2]]+h.A3F;d.push(k);b=new ZC.E5(x);b.append(f[a]);b.parse();H[a]=b;j.legend&&ZC._cp_({"legend-marker":{alpha:0.75,"background-color-1":b.Y,
"background-color-2":b.A8}},f[a]);l={};ZC._cp_({"background-color":"#fff",color:"#333","border-width":1,"border-color":"#999",padding:10},l);if(m.style!=null&&(c=m.style.tooltip)!=null)ZC._cp_(c,l);r=f[a].text||"";l.text=r;g={};ZC._cp_({alpha:0.75,"border-width":0,"background-color":b.Y+" "+b.A8,tooltip:l},g);if(m.style!=null&&(c=m.style.band)!=null)ZC._cp_(c,g);if(f[a].style!=null&&(c=f[a].style.band)!=null)ZC._cp_(c,g);ZC._cp_({type:"pie",id:"segment_"+a,x:t,y:u,size:q,"angle-start":k[ZC._[1]],
"angle-end":k[ZC._[2]],slice:y},g);g.tooltip.text=g.tooltip.text.replace(/%text/gi,r);G.push(g)}else{f[a].visible=0;d.push(null)}}b=Number.MAX_VALUE;if(o!=0){a=0;for(v=d.length;a<v;a++)if(ZC.AH(s,a)==-1)b=ZC.CT(b,Math.pow(10,Math.floor(Math.log(d[a].total)/Math.LN10)));for(;;){var I=w*b/o;if(I<10)break;b/=2}}else b=1;l=Math.min(0,Math.ceil(Math.log(b)/Math.LN10)+1);a=0;for(v=d.length;a<v;a++)if(ZC.AH(s,a)==-1){p=0;j=[];o={};ZC._cp_({"static":true,"line-color":"#666","line-width":1},o);if(m.style!=
null&&(c=m.style.tick)!=null)ZC._cp_(c,o);if(f[a].style!=null&&(c=f[a].style.tick)!=null)ZC._cp_(c,o);w=o[ZC._[23]]||5;z=Math.floor(10/I);for(k=d[a][ZC._[1]];k<d[a][ZC._[2]];k+=I){r=ZC.AV.BN(t,u,q,k+0.1);g=ZC.AV.BN(t,u,q+w,k+0.1);j.push(r,g,null);if(p%z==0){g=p*b;r=g.toFixed(l);if(g>=1E3)r=g/1E3+"k";if(g>=1E6)r=g/1E6+"M";g=k;var A="left";if(k>90&&k<270){g=k-180;A="right"}var B={};ZC._cp_({color:"#333"},B);if(m.style!=null&&(c=m.style.label)!=null)ZC._cp_(c,B);if(f[a].style!=null&&(c=f[a].style.label)!=
null)ZC._cp_(c,B);var N=B[ZC._[21]]||30,O=ZC.AV.BN(t,u,q+w+N/2,k+0.1);ZC._cp_({centerRef:true,"static":true,x:O[0],y:O[1],width:N,angle:g,"text-align":A,text:r},B);n.push(B)}p++}ZC._cp_({type:"line",id:"ticks"+p,points:j},o);G.push(o)}q=y-h.A3C;a=0;for(v=d.length;a<v;a++)if(ZC.AH(s,a)==-1)for(b=0;b<v;b++)if(ZC.AH(s,b)==-1){for(n=l=y=0;n<b;n++)if(ZC.AH(s,n)==-1){if(typeof d[a][ZC._[5]][n]==ZC._[33])d[a][ZC._[5]][n]=0;y+=d[a][ZC._[5]][n]}for(n=0;n<a;n++)if(ZC.AH(s,n)==-1){if(typeof d[b][ZC._[5]][n]==
ZC._[33])d[b][ZC._[5]][n]=0;l+=d[b][ZC._[5]][n]}n=0;if(typeof d[a][ZC._[5]][b]!=ZC._[33])n=d[a][ZC._[5]][b];o=0;if(typeof d[b][ZC._[5]][a]!=ZC._[33])o=d[b][ZC._[5]][a];y=d[a][ZC._[1]]+(d[a][ZC._[2]]-d[a][ZC._[1]])*y/d[a].total;n=y+(d[a][ZC._[2]]-d[a][ZC._[1]])*n/d[a].total;j=d[b][ZC._[1]]+(d[b][ZC._[2]]-d[b][ZC._[1]])*l/d[b].total;o=j+(d[b][ZC._[2]]-d[b][ZC._[1]])*o/d[b].total;w=ZC.AV.BN(t,u,q,y);ZC.AV.BN(t,u,q,n);z=ZC.AV.BN(t,u,q,j);ZC.AV.BN(t,u,q,o);l={};ZC._cp_({"background-color":"#fff",color:"#333",
"border-width":1,"border-color":"#999",padding:10},l);if(m.style!=null&&(c=m.style.tooltip)!=null)ZC._cp_(c,l);k=f[a].text||"";r=f[b].text||"";g={};A=[];if(a==b){l.text=k+":"+d[a][ZC._[5]][b];A=[[w[0],w[1]],[t,u,q,y,n,0],[t,u,w[0],w[1]]]}else if(a<=b){l.text=k+":"+d[a][ZC._[5]][b]+"->"+r+":"+d[b][ZC._[5]][a];A=[[w[0],w[1]],[t,u,q,y,n,0],[t,u,z[0],z[1]],[t,u,q,j,o,0],[t,u,w[0],w[1]]]}if(A.length>0){ZC._cp_({"background-color":H[a].Y+" "+H[a].A8,alpha:0.75,"border-width":1,"border-color":"#666",tooltip:l},
g);if(m.style!=null&&(c=m.style.chord)!=null)ZC._cp_(c,g);if(f[a].style!=null&&(c=f[a].style.chord)!=null)ZC._cp_(c,g);ZC._cp_({type:"poly",id:"chord_"+a+"_"+b,points:A},g);if(a!=b&&(c=g.tooltip["text-chord"])!=null)g.tooltip.text=c;g.tooltip.text=g.tooltip.text.replace(/%text-destination/gi,r).replace(/%value-destination/gi,d[b][ZC._[5]][a]).replace(/%text-source/gi,k).replace(/%value-source/gi,d[a][ZC._[5]][b]).replace(/%text/gi,k).replace(/%value/gi,d[a][ZC._[5]][b]);G.push(g)}}}return e}})();
