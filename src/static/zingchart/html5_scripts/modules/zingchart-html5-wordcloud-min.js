/*
All of the code within the ZingChart software is developed and copyrighted by PINT, Inc., and may not be copied,
replicated, or used in any other software or application without prior permission from PINT. All usage must coincide with the
ZingChart End User License Agreement which can be requested by email at support@zingchart.com.

Build 0.120731
*/
zingchart.setModule("wordcloud");
(function(){ZC.A3G=function(){this.A3J=9;this.A3I=99;this.A3H=2;this.FJ=100;this.A3U=25;this.A3P=10;this.A2Y=0;this.ES="word";this.A2Z=[];this.AX="";this.CJ="spiral";this.A38="random";this.BM="#000";this.AZ=["#6a921f","#007fa3","#a62b02","#b79007","#563d02","#0b32a0"];this.A3M=function(){for(var f=(Math.random()*16777215+1<<0).toString(16);f.length<6;)f="0"+f;return"#"+f};this.KJ=function(){if(this.ES=="word")var f=this.AX.replace(/\W+/g," ").split(" ");else if(this.ES=="character"){this.A3H=0;f=
[];for(var e=0;e<this.AX.length;e++)this.AX[e]!=" "&&f.push(this.AX[e])}var c={};for(e=0;e<f.length;e++)if(f[e].length>=this.A3H&&ZC.AH(this.A2Z,f[e])==-1){if(c[f[e]]==null)c[f[e]]=0;c[f[e]]++}return c};this.intersectRect=function(f,e){return!(e.iX>f.iX+f.G||e.iX+e.G<f.iX||e.iY>f.iY+f.E||e.iY+e.E<f.iY)}};var J=zingchart.dataparse;zingchart.dataparse=function(f,e){if(J!=null)e=J(f,e);for(var c,B=zingchart.getLoader(f.id),u=0,M=e[ZC._[18]].length;u<M;u++)if(e[ZC._[18]][u].type&&e[ZC._[18]][u].type==
"wordcloud"){c=e[ZC._[18]][u].type;var v=e[ZC._[18]][u],h={};if(v.options)h=v.options[c]||v.options;ZC._todash_(h);v[ZC._[12]]=v[ZC._[12]]||[];var a=new ZC.A3G;if((c=h.text)!=null)a.AX=c;if((c=h.aspect)!=null)a.CJ=c;if((c=h.ignore)!=null)a.A2Z=c;if((c=h.token)!=null)a.ES=c;if((c=h["min-length"])!=null)a.A3H=ZC._i_(c);if((c=h["min-font-size"])!=null)a.A3J=ZC._i_(c);if((c=h["max-font-size"])!=null)a.A3I=ZC._i_(c);if((c=h["max-items"])!=null)a.FJ=ZC._i_(c);if((c=h["color-type"])!=null)a.A38=c;if((c=
h.color)!=null)a.BM=ZC.BP.LQ(c);if((c=h.palette)!=null)a.AZ=c;if((c=h["step-angle"])!=null)a.A3U=ZC._i_(c);if((c=h["step-radius"])!=null)a.A3P=ZC._i_(c);if((c=h.rotate)!=null)a.A2Y=ZC._b_(c);var C={};if((c=h.style)!=null)ZC._cp_(c,C);var q=new ZC.D1(B);q.append(C);q.parse();a.A3J=ZC.BR(4,a.A3J);a.A3I=ZC.BR(4,a.A3I);if(a.A3J>=a.A3I)a.A3I=a.A3J+2;var g=zingchart.getGraphInfo(B,e,u),x=[],y=g.plotarea.x+g.plotarea.width/2,D=g.plotarea.y+g.plotarea.height/2,b=1;if(a.CJ=="spiral")b=0.6;else if(a.CJ=="flow-top"||
a.CJ=="flow-center")b=0.8;var s=g.plotarea.width*g.plotarea.height*b;b=a.KJ();var d=[],o=-Number.MAX_VALUE,j=Number.MAX_VALUE,z;for(z in b)d.push({text:z,count:b[z],hits:b[z]});d.sort(function(l,K){if(l.count<K.count)return 1;else if(l.count>K.count)return-1;return 0});a.FJ!=-1&&d.splice(a.FJ,d.length-a.FJ);for(b=0;b<d.length;b++){o=ZC.BR(d[b].count,o);j=ZC.CT(d[b].count,j)}for(b=0;b<d.length;b++)d[b].count=100*(d[b].count-j)/(o-j);o=function(){for(var l=0;l<d.length;l++){d[l].fontSize=ZC._i_(a.A3J+
d[l].count/100*(a.A3I-a.A3J));d[l].width=ZC.L.A1P(B.P,d[l].text,q.G8,d[l].fontSize,q.KX)+q.ER+q.FL;d[l].height=d[l].fontSize*1.1+q.GV+q.I0}};o();for(j=0;!j;){j=1;var w=0;for(b=0;b<d.length;b++)w+=d[b].width*d[b].height;if(w>s){j=0;a.A3I--;if(a.A3I==a.A3J)j=1;else o()}}if(h["step-radius"]==null)a.A3P=(a.A3I-a.A3J+0.25*a.A3J*a.A3H+1)/10;o=s=0;j=a.A3I/2;w=a.A3I/2;var E=[];b=0;for(var N=d.length;b<N;b++){var t=1,p=y,k=D,r=a.BM;switch(a.A38){case "random":r=a.A3M();break;case "palette":r=a.AZ[b%a.AZ.length]}var F=
a.A2Y?b%4==0||b%4==3?0:90:0,A=0,n={padding:0};ZC._cp_(C,n);ZC._cp_({angle:F,"font-size":d[b].fontSize,text:d[b].text,color:r},n);if(h.style!=null&&(c=h.style["hover-state"])!=null){n["hover-state"]={};ZC._cp_(c,n["hover-state"])}n.tooltip={visible:false,"background-color":"#fff",color:"#333","border-width":1,"border-color":"#999",padding:10,text:d[b].text};if(h.style!=null&&(c=h.style.tooltip)!=null)ZC._cp_(c,n.tooltip);n.tooltip.text=n.tooltip.text.replace("%text",d[b].text).replace("%hits",d[b].hits);
var G=r=0,H=0,I=a.A3J/2;if(a.CJ=="flow-top")H=1;else if(a.CJ=="flow-center")H=b%2==0?1:-1;for(E[b]=0;t;){var i=d[b].width,m=d[b].height;if(a.CJ=="spiral"){p=y+(b==0?0:j)*ZC.D4(s)-i/2;k=D+(b==0?0:w)*ZC.CP(s)-m/2}else if(a.CJ=="flow-center"){p=b==0?y-i/2:g.plotarea.x+r;k=D-m/2+G}else if(a.CJ=="flow-top"){p=b==0?y-i/2:g.plotarea.x+r;k=g.plotarea.y+G}if(F==90&&a.CJ=="flow-top")k=ZC.BR(k,g.plotarea.y+m);n.x=ZC._i_(p);n.y=ZC._i_(k);t=0;if(F==90){var O=i;p=ZC._i_(p+i/2-m/2);k=ZC._i_(k+m/2-i/2);i=m;m=O}if(p<
g.plotarea.x||p+i>g.plotarea.x+g.plotarea.width||k<g.plotarea.y||k+m>g.plotarea.y+g.plotarea.height)if(a.CJ=="spiral")if(E[b]<500){E[b]++;t=1}else{A=1;break}else if(a.CJ=="flow-top"||a.CJ=="flow-center"){if(p+i>g.plotarea.x+g.plotarea.width){t=1;r=-I;G+=H*I}if(k+m>g.plotarea.y+g.plotarea.height){A=1;break}if(k<g.plotarea.y){A=1;break}}var L={iX:p,iY:k,G:i,E:m,DS:d[b].fontSize,AX:d[b].text,G8:q.G8};if(!t){i=0;for(m=x.length;i<m;i++)if(a.intersectRect(x[i],L)){r+=x[i].G;t=1;break}}if(a.CJ=="spiral")if(t){s+=
a.A3U;if(s>o+360){j+=a.A3P;w+=a.A3P*(g.plotarea.height/g.plotarea.width);s=o=ZC._i_(ZC._r_(0,360))}}else{j=w=a.A3I/2;s=o=ZC._i_(ZC._r_(0,360))}else if(a.CJ=="flow-top"||a.CJ=="flow-center")if(t)r+=I}if(!A){x.push(L);v[ZC._[12]].push(n)}}}return e}})();
